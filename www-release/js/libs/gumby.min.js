!function(e){function t(){this.$dom=e(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"===e("script[gumby-init]").attr("gumby-init")?!1:!0,this.debugMode=Boolean(e("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number(e("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var t=e("script[gumby-touch]").attr("gumby-touch"),n=e("script[gumby-path]").attr("gumby-path");"false"===t?this.touchEvents=!1:t?this.touchEvents=t:n&&(this.touchEvents=n),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&e(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}t.prototype.init=function(e){var t=this,n=e?e:{};return this.$dom.ready(function(){n.debug&&(t.debugMode=!0),t.debug("Initializing Gumby");var e=n.uiModules?n.uiModules:!1;t.initUIModules(e),t.onReady&&t.onReady(),t.isOldie&&t.onOldie&&t.onOldie(),Modernizr.touch&&t.onTouch&&t.onTouch()}),this},t.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touch&&this.onTouch&&this.onTouch()},t.prototype.ready=function(e){return e&&"function"==typeof e&&(this.onReady=e),this},t.prototype.oldie=function(e){return e&&"function"==typeof e&&(this.onOldie=e),this},t.prototype.touch=function(e){return e&&"function"==typeof e&&(this.onTouch=e),this},t.prototype.console=function(e,t){this.debugMode&&window.console&&console[console[e]?e:"log"](t.length>1?Array.prototype.slice.call(t):t[0])},t.prototype.log=function(){this.console("log",arguments)},t.prototype.debug=function(){this.console("debug",arguments)},t.prototype.warn=function(){this.console("warn",arguments)},t.prototype.error=function(){this.console("error",arguments)},t.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},t.prototype.selectAttr=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e],n="data-"+arguments[e],r="gumby-"+arguments[e];if(this.is("["+n+"]"))return this.attr(n)?this.attr(n):!0;if(this.is("["+r+"]"))return this.attr(r)?this.attr(r):!0;if(this.is("["+t+"]"))return this.attr(t)?this.attr(t):!0}return!1},t.prototype.addInitalisation=function(e,t){this.inits[e]=t},t.prototype.initialize=function(e,t){if("object"==typeof e){var n=0;for(n;n<e.length;n++)this.inits[e[n]]&&"function"==typeof this.inits[e[n]]?this.inits[e[n]](t):this.error("Error initializing module: "+e[n])}else this.inits[e]&&"function"==typeof this.inits[e]?this.inits[e](t):this.error("Error initializing module: "+e);return this},t.prototype.UIModule=function(e){var t=e.module;this.uiModules[t]=e},t.prototype.initUIModules=function(e){var t,n,r=this.uiModules;e&&(r=e);for(t in r)n=e?r[t]:t,this.uiModules[n].init()},window.Gumby=new t}(jQuery),!function(e){function t(e){Gumby.debug("Initializing Checkbox",e),this.$el=e,this.$input=this.$el.find("input[type=checkbox]");var t=this;this.$el.on(Gumby.click,function(e){e.preventDefault(),t.$input.is("[disabled]")||(t.$el.hasClass("checked")?t.update(!1):t.update(!0))}).on("gumby.check",function(){Gumby.debug("Check event triggered",t.$el),t.update(!0)}).on("gumby.uncheck",function(){Gumby.debug("Uncheck event triggered",t.$el),t.update(!1)}),(this.$input.prop("checked")||this.$el.hasClass("checked"))&&t.update(!0)}t.prototype.update=function(e){var t=this.$el.find("span");e?(Gumby.debug("Checking Checkbox",this.$el),t.append('<i class="icon-check" />'),this.$input.prop("checked",!0),Gumby.debug("Triggering onCheck event",this.$el),Gumby.debug("Triggering onChange event",this.$el),this.$el.addClass("checked").trigger("gumby.onCheck").trigger("gumby.onChange")):(Gumby.debug("Unchecking Checkbox",this.$el),this.$input.prop("checked",!1),t.find("i").remove(),Gumby.debug("Triggering onUncheck event",this.$el),Gumby.debug("Triggering onChange event",this.$el),this.$el.removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange"))},Gumby.addInitalisation("checkbox",function(){e(".checkbox").each(function(){var n=e(this);return n.data("isCheckbox")?!0:(n.data("isCheckbox",!0),new t(n),void 0)})}),Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkbox")}})}(jQuery),!function(e){function t(t){Gumby.debug("Initializing Fixed Position",t),this.$el=t,this.$window=e(window),this.fixedPoint="",this.pinPoint=!1,this.fixedPointjQ=!1,this.pinPointjQ=!1,this.offset=0,this.pinOffset=0,this.top=0,this.constrainEl=!0,this.state=!1,this.measurements={left:0,width:0},this.setup();var n=this;this.$window.on("scroll load",function(){n.monitorScroll()}),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Fixed Position",t),n.setup(),n.monitorScroll()})}t.prototype.setup=function(){var e=this;this.fixedPoint=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["fixed"])),this.pinPoint=Gumby.selectAttr.apply(this.$el,["pin"])||!1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.pinOffset=Number(Gumby.selectAttr.apply(this.$el,["pinoffset"]))||0,this.top=Number(Gumby.selectAttr.apply(this.$el,["top"]))||0,this.constrainEl=Gumby.selectAttr.apply(this.$el,["constrain"])||!0,"false"===this.constrainEl&&(this.constrainEl=!1),this.$parent=this.$el.parents(".columns, .column, .row"),this.$parent=this.$parent.length?this.$parent.first():!1,this.parentRow=this.$parent?!!this.$parent.hasClass("row"):!1,this.pinPoint&&(this.pinPoint=this.parseAttrValue(this.pinPoint)),this.fixedPointjQ=this.fixedPoint instanceof jQuery,this.pinPointjQ=this.pinPoint instanceof jQuery,this.$parent&&this.constrainEl&&(this.measure(),this.$window.resize(function(){e.state&&(e.measure(),e.constrain())}))},t.prototype.monitorScroll=function(){var e=this.$window.scrollTop(),t=this.fixedPointjQ?this.fixedPoint.offset().top:this.fixedPoint,n=!1;this.pinPoint&&(n=this.pinPointjQ?this.pinPoint.offset().top:this.pinPoint),this.offset&&(t-=this.offset),this.pinOffset&&(n-=this.pinOffset),e>=t&&"fixed"!==this.state?(!n||n>e)&&this.fix():t>e&&"fixed"===this.state?this.unfix():n&&e>=n&&"pinned"!==this.state&&this.pin()},t.prototype.fix=function(){Gumby.debug("Element has been fixed",this.$el),Gumby.debug("Triggering onFixed event",this.$el),this.state="fixed",this.$el.css({top:this.top}).addClass("fixed").removeClass("unfixed pinned").trigger("gumby.onFixed"),this.$parent&&this.constrain()},t.prototype.unfix=function(){Gumby.debug("Element has been unfixed",this.$el),Gumby.debug("Triggering onUnfixed event",this.$el),this.state="unfixed",this.$el.addClass("unfixed").removeClass("fixed pinned").trigger("gumby.onUnfixed")},t.prototype.pin=function(){Gumby.debug("Element has been pinned",this.$el),Gumby.debug("Triggering onPinned event",this.$el),this.state="pinned",this.$el.css({top:this.$el.offset().top}).addClass("pinned fixed").removeClass("unfixed").trigger("gumby.onPinned")},t.prototype.constrain=function(){Gumby.debug("Constraining element",this.$el),this.$el.css({left:this.measurements.left,width:this.measurements.width})},t.prototype.measure=function(){var e;this.measurements.left=this.$parent.offset().left,this.measurements.width=this.$parent.width(),this.parentRow&&(e=Number(this.$parent.css("paddingLeft").replace(/px/,"")),e&&(this.measurements.left+=e))},t.prototype.parseAttrValue=function(t){if(e.isNumeric(t))return Number(t);if("top"===t)return this.$el.offset().top;var n=e(t);return n.length?n:(Gumby.error("Cannot find Fixed target: "+t),!1)},Gumby.addInitalisation("fixed",function(n){e("[data-fixed],[gumby-fixed],[fixed]").each(function(){var r=e(this);return r.data("isFixed")&&!n?!0:r.data("isFixed")&&n?(r.trigger("gumby.initialize"),!0):(r.data("isFixed",!0),new t(r),void 0)})}),Gumby.UIModule({module:"fixed",events:["initialize","onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}(jQuery),!function(e){function t(e){Gumby.debug("Initializing Navbar",e),this.$el=e,this.$dropDowns=this.$el.find("li:has(.dropdown)");var t=this,n=this.$el.attr("gumby-persist");"undefined"==typeof n&&"false"!==n&&this.$el.find("li:not(:has(.dropdown)) a").on(Gumby.click,function(){t.$el.find("ul").removeClass("active")}),this.$dropDowns.on(Gumby.click,this.toggleDropdown).on("swiperight",this.openLink),"#"!==this.$dropDowns.children("a").attr("href")&&this.$dropDowns.children("a").append('<i class="icon-popup"></i>').children("i").on(Gumby.click,this.openLink),this.$el.find("li:not(:has(.dropdown)) a[href]").on(Gumby.click,this.openLink)}Gumby.gumbyTouch&&(t.prototype.toggleDropdown=function(t){if(t.preventDefault(),e(this).parents(".dropdown")&&t.stopImmediatePropagation(),!e(t.target).is("i")){var n=e(this);n.hasClass("active")?n.removeClass("active"):n.addClass("active")}},t.prototype.openLink=function(t){t.preventDefault();var n,r=e(this),i=r;r.is("i")?i=r.parent("a"):r.is("li")&&(i=r.children("a")),n=i.attr("href"),"blank"==i.attr("target")?window.open(n):window.location=n},Gumby.addInitalisation("navbar",function(){e(".navbar").each(function(){var n=e(this);return n.data("isNavbar")?!0:(n.data("isNavbar",!0),new t(n),void 0)})}),Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbar")}}))}(jQuery),!function(e){function t(e){Gumby.debug("Initializing Radio Button",e),this.$el=e,this.$input=this.$el.find("input[type=radio]");var t=this;this.$el.on(Gumby.click,function(e){e.preventDefault(),t.$input.is("[disabled]")||t.update()}).on("gumby.check",function(){Gumby.debug("Check event triggered",t.$el),t.update()}),(this.$input.prop("checked")||this.$el.hasClass("checked"))&&t.update(!0)}t.prototype.update=function(){if(!(this.$el.hasClass("checked")&&this.$input.prop("checked")&&this.$el.find("i.icon-dot").length)){Gumby.debug("Updating Radio Button group",this.$el);var t=this.$el.find("span"),n='input[name="'+this.$input.attr("name")+'"]';e(".radio").has(n).removeClass("checked").find("input").prop("checked",!1).end().find("i").remove(),this.$input.prop("checked",!0),t.append('<i class="icon-dot" />'),Gumby.debug("Triggering onCheck event",this.$el),this.$el.addClass("checked").trigger("gumby.onCheck")}},Gumby.addInitalisation("radiobtn",function(){e(".radio").each(function(){var n=e(this);return n.data("isRadioBtn")?!0:(n.data("isRadioBtn",!0),new t(n),void 0)})}),Gumby.UIModule({module:"radiobtn",events:["onCheck","check"],init:function(){Gumby.initialize("radiobtn")}})}(jQuery),!function(e){function t(t){Gumby.debug("Initializing Retina",t),this.$el=t,this.imageSrc=this.$el.attr("src"),this.retinaSrc=this.fetchRetinaImage(),this.$retinaImg=e(new Image);var n=this;return this.retinaSrc?(this.$retinaImg.attr("src",this.retinaSrc).load(function(){n.retinaImageLoaded()}).error(function(){Gumby.error("Couln't load retina image: "+n.retinaSrc)}),void 0):!1}t.prototype.fetchRetinaImage=function(){var e=this.imageSrc,t=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);return 0>t?!1:e.substr(0,t)+"@2x"+e.substr(t,e.length)},t.prototype.retinaImageLoaded=function(){Gumby.debug("Swapping image for retina version",this.$el),Gumby.debug("Triggering onRetina event",this.$el),this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")},Gumby.addInitalisation("retina",function(){!window.devicePixelRatio||window.devicePixelRatio<=1||e("img[data-retina],img[gumby-retina],img[retina]").each(function(){var n=e(this);return n.data("isRetina")?!0:(n.data("isRetina",!0),new t(n),void 0)})}),Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(jQuery),!function(e){function t(e){Gumby.debug("Initializing Skiplink",e),this.$el=e,this.targetPos=0,this.duration=0,this.offset=!1,this.easing="",this.update=!1,this.setup();var t=this;this.$el.on(Gumby.click+" gumby.skip",function(e){e.preventDefault(),"skip"===e.namespace&&Gumby.debug("Skip event triggered",t.$el),t.update?t.calculateTarget(t.skipTo):t.skipTo()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing Skiplink",t.$el),t.setup()})}t.prototype.setup=function(){this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200,this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||!1,this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing",this.update=Gumby.selectAttr.apply(this.$el,["update"])?!0:!1,this.calculateTarget()},t.prototype.calculateTarget=function(t){var n,r=Gumby.selectAttr.apply(this.$el,["goto"]);if("top"==r)this.targetPos=0;else if(e.isNumeric(r))this.targetPos=Number(r);else{if(n=e(r),!n.length)return Gumby.error("Cannot find skiplink target: "+r),!1;this.targetPos=n.offset().top}t&&t.apply(this)},t.prototype.skipTo=function(){Gumby.debug("Skipping to target",this.$el);var t=this;e("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){Gumby.debug("Triggering onComplete event",t.$el),t.$el.trigger("gumby.onComplete")})},t.prototype.calculateOffset=function(){if(!this.offset)return this.targetPos;var e=this.offset.substr(0,1),t=Number(this.offset.substr(1,this.offset.length));return"-"===e?this.targetPos-t:"+"===e?this.targetPos+t:void 0},Gumby.addInitalisation("skiplink",function(n){e(".skiplink > a, .skip").each(function(){var r=e(this);return r.data("isSkipLink")&&!n?!0:r.data("isSkipLink")&&n?(r.trigger("gumby.initialize"),!0):(r.data("isSkipLink",!0),new t(r),void 0)})}),Gumby.UIModule({module:"skiplink",events:["initialize","onComplete","skip"],init:function(){Gumby.initialize("skiplink")}})}(jQuery),!function(e){function t(t){Gumby.debug("Initializing Tabs",t),this.$el=t,this.$nav=this.$el.find("> ul.tab-nav > li"),this.$content=this.$el.children(".tab-content");var n=this;this.$nav.children("a").on(Gumby.click,function(t){t.preventDefault(),n.click(e(this))}),this.$el.on("gumby.set",function(e,t){Gumby.debug("Set event triggered",n.$el),n.set(e,t)})}t.prototype.click=function(e){var t=e.parent().index();this.$nav.eq(t).add(this.$content.eq(t)).hasClass("active")||(Gumby.debug("Setting active tab to "+t,this.$el),this.$nav.add(this.$content).removeClass("active"),this.$nav.eq(t).add(this.$content.eq(t)).addClass("active"),Gumby.debug("Triggering onChange event",this.$el),this.$el.trigger("gumby.onChange",t))},t.prototype.set=function(e,t){this.$nav.eq(t).find("a").trigger(Gumby.click)},Gumby.addInitalisation("tabs",function(){e(".tabs").each(function(){var n=e(this);return n.data("isTabs")?!0:(n.data("isTabs",!0),new t(n),void 0)})}),Gumby.UIModule({module:"tabs",events:["onChange","set"],init:function(){Gumby.initialize("tabs")}})}(jQuery),!function(e){function t(t){this.$el=e(t),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",t),this.init())}function n(t){this.$el=e(t),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",t),this.init())}t.prototype.init=function(){var e=this;this.setup(),this.$el.on(this.on,function(t){t.preventDefault(),e.trigger(e.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",e.$el),e.trigger(e.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+e.constructor,$el),e.setup()})},t.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},t.prototype.parseTargets=function(){var t=Gumby.selectAttr.apply(this.$el,["trigger"]),n=0,r=[];return t?(n=t.indexOf("|"),-1===n?this.checkTargets([t])?[e(t)]:!1:(r=t.split("|"),this.checkTargets(r)?r.length>1?[e(r[0]),e(r[1])]:[e(r[0])]:!1)):!1},t.prototype.checkTargets=function(t){var n=0;for(n;n<t.length;n++)if(t[n]&&!e(t[n]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+t[n]),!1;return!0},t.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},n.prototype=new t,n.prototype.constructor=n,t.prototype.trigger=function(e){Gumby.debug("Triggering Toggle",this.$el);var t;this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(t=this.targets[0],this.self||(t=t.add(this.$el)),t.removeClass(this.className),this.targets[1].addClass(this.className)):(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),e&&"function"==typeof e&&e.apply(this)},n.prototype.trigger=function(e){Gumby.debug("Triggering Switch",this.$el);var t;this.targets?1==this.targets.length?(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className)):this.targets.length>1&&(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),e&&"function"==typeof e&&e.apply(this)},Gumby.addInitalisation("toggles",function(n){e(".toggle").each(function(){var r=e(this);return r.data("isToggle")&&!n?!0:(r.data("isToggle")&&n&&r.trigger("gumby.initialize"),r.data("isToggle",!0),new t(r),void 0)})}),Gumby.addInitalisation("switches",function(t){e(".switch").each(function(){var r=e(this);return r.data("isSwitch")&&!t?!0:r.data("isSwitch")&&t?(r.trigger("gumby.initialize"),!0):(r.data("isSwitch",!0),new n(r),void 0)})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery),!function(e){function t(e,t){Gumby&&Gumby.debug("Initializing Validation",e),this.$this=e,this.$field=this.$this.parents(".field"),this.req=t||function(){return!!this.$this.val().length};var n=this;this.$this.is("[type=checkbox], [type=radio]")?(this.$field=this.$this.parent("label"),this.$field.on("gumby.onChange",function(){n.validate()})):this.$this.is("select")?(this.$field=this.$this.parents(".picker"),this.$field.on("change",function(){n.validate()})):this.$this.on("blur",function(e){9!==e.which&&n.validate()})}t.prototype.validate=function(){var e=this.req(this.$this);return e?this.$field.removeClass("danger").addClass("success"):this.$field.removeClass("success").addClass("danger"),e},e.fn.validation=function(n){var r=e.extend({submit:!1,fail:!1,required:[]},n),s=[];return this.each(function(){if(!r.required.length)return!1;var n,o=e(this),u=r.required.length;for(n=0;u>n;n++)s.push(new t(o.find('[name="'+r.required[n].name+'"]'),r.required[n].validate||!1));o.on("submit",function(e){var t=!1;if(!o.data("passed")){e.preventDefault();var n,i=s.length;for(n=0;i>n;n++)s[n].validate()||(t=!0);if(t){if(r.fail&&"function"==typeof r.fail)return r.fail(),void 0}else{if(r.submit&&"function"==typeof r.submit)return r.submit(o.serializeArray()),void 0;o.data("passed",!0).submit()}}})})}}(jQuery),!function(e){Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){e.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery);