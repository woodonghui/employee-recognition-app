!function(e){function t(t){this.$el=e(t),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",t),this.init())}function n(t){this.$el=e(t),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",t),this.init())}t.prototype.init=function(){var e=this;this.setup(),this.$el.on(this.on,function(t){t.preventDefault(),e.trigger(e.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",e.$el),e.trigger(e.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+e.constructor,$el),e.setup()})},t.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self=Gumby.selectAttr.apply(this.$el,["self"])==="false"},t.prototype.parseTargets=function(){var t=Gumby.selectAttr.apply(this.$el,["trigger"]),n=0,r=[];return t?(n=t.indexOf("|"),n===-1?this.checkTargets([t])?[e(t)]:!1:(r=t.split("|"),this.checkTargets(r)?r.length>1?[e(r[0]),e(r[1])]:[e(r[0])]:!1)):!1},t.prototype.checkTargets=function(t){var n=0;for(n;n<t.length;n++)if(t[n]&&!e(t[n]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+t[n]),!1;return!0},t.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},n.prototype=new t,n.prototype.constructor=n,t.prototype.trigger=function(e){Gumby.debug("Triggering Toggle",this.$el);var t;this.targets?this.targets.length==1?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(t=this.targets[0],this.self||(t=t.add(this.$el)),t.removeClass(this.className),this.targets[1].addClass(this.className)):(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),e&&typeof e=="function"&&e.apply(this)},n.prototype.trigger=function(e){Gumby.debug("Triggering Switch",this.$el);var t;this.targets?this.targets.length==1?(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className)):this.targets.length>1&&(t=this.targets[0],this.self||(t=t.add(this.$el)),t.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),e&&typeof e=="function"&&e.apply(this)},Gumby.addInitalisation("toggles",function(n){e(".toggle").each(function(){var r=e(this);if(r.data("isToggle")&&!n)return!0;r.data("isToggle")&&n&&r.trigger("gumby.initialize"),r.data("isToggle",!0),new t(r)})}),Gumby.addInitalisation("switches",function(t){e(".switch").each(function(){var r=e(this);if(r.data("isSwitch")&&!t)return!0;if(r.data("isSwitch")&&t)return r.trigger("gumby.initialize"),!0;r.data("isSwitch",!0),new n(r)})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery);